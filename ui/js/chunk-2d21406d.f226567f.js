(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21406d"],{aed7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("el-form",{attrs:{inline:!0}},[t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit("")}}},[e._v("添加 ")])],1)],1),t("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{sortable:"true",prop:"id",label:"ID",width:"60"}}),t("el-table-column",{attrs:{prop:"ip_addr",label:"IP地址"}}),t("el-table-column",{attrs:{prop:"mac_addr",label:"MAC地址"}}),t("el-table-column",{attrs:{prop:"unique_mac",label:"唯一MAC"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.unique_mac?t("el-tag",{attrs:{type:"success"}},[e._v("是")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"keep",label:"IP保留"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-switch",{attrs:{disabled:"","active-color":"#13ce66"},model:{value:r.row.keep,callback:function(t){e.$set(r.row,"keep",t)},expression:"scope.row.keep"}})]}}])}),t("el-table-column",{attrs:{prop:"note",label:"备注"}}),t("el-table-column",{attrs:{prop:"last_login",label:"最后登陆时间",formatter:e.tableDateFormat}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(r.row)}}},[e._v("编辑 ")]),t("el-popconfirm",{staticClass:"m-left-10",attrs:{title:"确定要删除IP映射吗？"},on:{confirm:function(t){return e.handleDel(r.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除 ")])],1)]}}])})],1),t("div",{staticClass:"sh-20"}),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","pager-count":11,total:e.count},on:{"current-change":e.pageChange}})],1),t("el-dialog",{attrs:{title:"提示","close-on-click-modal":!1,visible:e.user_edit_dialog,width:"600px",center:""},on:{close:e.disVisible}},[t("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.id,callback:function(t){e.$set(e.ruleForm,"id",t)},expression:"ruleForm.id"}})],1),t("el-form-item",{attrs:{label:"IP地址",prop:"ip_addr"}},[t("el-input",{model:{value:e.ruleForm.ip_addr,callback:function(t){e.$set(e.ruleForm,"ip_addr",t)},expression:"ruleForm.ip_addr"}})],1),t("el-form-item",{attrs:{label:"MAC地址",prop:"mac_addr"}},[t("el-input",{model:{value:e.ruleForm.mac_addr,callback:function(t){e.$set(e.ruleForm,"mac_addr",t)},expression:"ruleForm.mac_addr"}})],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"note"}},[t("el-input",{model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),t("el-form-item",{attrs:{label:"IP保留",prop:"keep"}},[t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.ruleForm.keep,callback:function(t){e.$set(e.ruleForm,"keep",t)},expression:"ruleForm.keep"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),t("el-button",{on:{click:e.disVisible}},[e._v("取消")])],1)],1)],1)],1)},l=[],o=r("bc3a"),s=r.n(o),i={name:"IpMap",components:{},mixins:[],created(){this.$emit("update:route_path",this.$route.path),this.$emit("update:route_name",["用户信息","IP映射"])},mounted(){this.getData(1)},data(){return{tableData:[],count:10,nowIndex:0,ruleForm:{status:1,groups:[]},rules:{username:[{required:!1,message:"请输入用户名",trigger:"blur"},{max:50,message:"长度小于 50 个字符",trigger:"blur"}],mac_addr:[{required:!0,message:"请输入mac地址",trigger:"blur"}],ip_addr:[{required:!0,message:"请输入ip地址",trigger:"blur"}],status:[{required:!0}]}}},methods:{getData(e){s.a.get("/user/ip_map/list",{params:{page:e}}).then(e=>{var t=e.data.data;console.log(t),this.tableData=t.datas,this.count=t.count}).catch(e=>{this.$message.error("哦，请求出错"),console.log(e)})},pageChange(e){this.getData(e)},handleEdit(e){!this.$refs["ruleForm"]||this.$refs["ruleForm"].resetFields(),console.log(e),this.user_edit_dialog=!0,e&&s.a.get("/user/ip_map/detail",{params:{id:e.id}}).then(e=>{this.ruleForm=e.data.data}).catch(e=>{this.$message.error("哦，请求出错"),console.log(e)})},handleDel(e){s.a.post("/user/ip_map/del?id="+e.id).then(e=>{var t=e.data;0===t.code?(this.$message.success(t.msg),this.getData(1)):this.$message.error(t.msg),console.log(t)}).catch(e=>{this.$message.error("哦，请求出错"),console.log(e)})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;s.a.post("/user/ip_map/set",this.ruleForm).then(e=>{var t=e.data;0===t.code?(this.$message.success(t.msg),this.getData(1)):this.$message.error(t.msg),console.log(t)}).catch(e=>{this.$message.error("哦，请求出错"),console.log(e)})})}}},n=i,u=r("2877"),m=Object(u["a"])(n,a,l,!1,null,"91646116",null);t["default"]=m.exports}}]);